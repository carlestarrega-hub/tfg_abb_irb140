<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Mando Robot ABB - PRO</title>
<script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
<style>
  body { font-family: 'Segoe UI', sans-serif; background-color: #eef2f5; text-align: center; padding: 20px; }
  .panel { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 450px; margin: 0 auto; }
  
  h3 { margin-bottom: 5px; color: #444; }
  label { font-weight: bold; color: #555; display: inline-block; width: 20px;}
  input[type=number] { width: 70px; padding: 8px; font-size: 16px; text-align: center; border-radius: 5px; border: 1px solid #ccc; margin: 5px; }
  
  /* Sliders bonitos */
  input[type=range] { width: 100%; margin: 5px 0; accent-color: #007bff; }
  .val-display { font-weight:bold; color:#007bff; font-size: 14px; float: right;}
  .slider-group { text-align: left; margin-bottom: 15px; }
  
  .btn {
    background-color: #007bff; color: white; border: none;
    padding: 15px 30px; font-size: 18px; cursor: pointer;
    border-radius: 8px; margin-top: 20px; width: 100%; transition: 0.3s; font-weight: bold;
  }
  .btn:hover { background-color: #0056b3; transform: scale(1.02); }
  .btn:active { transform: scale(0.98); }
  
  #status { font-weight: bold; display: block; margin-bottom: 15px; padding: 10px; background: #ddd; border-radius: 5px;}
</style>

<script type="text/javascript">
  var ros;
  var ordenTopic;

  function init() {
    ros = new ROSLIB.Ros({ url : 'ws://localhost:9090' });
    ros.on('connection', function() { 
        document.getElementById("status").innerHTML = "游릭 CONECTADO"; 
        document.getElementById("status").style.background = "#d4edda";
    });
    ros.on('close', function() { 
        document.getElementById("status").innerHTML = "游댮 DESCONECTADO"; 
        document.getElementById("status").style.background = "#f8d7da";
    });

    ordenTopic = new ROSLIB.Topic({
      ros : ros,
      name : '/orden_web',
      messageType : 'std_msgs/String'
    });
  }

  function updateDisplay(id, val) {
    document.getElementById(id).innerText = val + "춿";
  }

  function enviarCoordenadas() {
    var x = document.getElementById("posX").value;
    var y = document.getElementById("posY").value;
    var z = document.getElementById("posZ").value;
    
    var r = document.getElementById("sl_roll").value;
    var p = document.getElementById("sl_pitch").value;
    var w = document.getElementById("sl_yaw").value;
    
    // Enviamos formato "MOVE:X,Y,Z,ROLL,PITCH,YAW"
    var comando = "MOVE:" + x + "," + y + "," + z + "," + r + "," + p + "," + w;
    
    ordenTopic.publish(new ROSLIB.Message({ data : comando }));
    console.log("Enviado: " + comando);
  }
</script>
</head>

<body onload="init()">
  <div class="panel">
    <h1>游뱄 ABB CONTROL TOTAL</h1>
    <span id="status">游댮 Esperando conexi칩n...</span>

    <h3>游늸 Posici칩n (XYZ)</h3>
    <div>
      <label>X</label> <input type="number" id="posX" value="0.5" step="0.1">
      <label>Y</label> <input type="number" id="posY" value="0.0" step="0.1">
      <label>Z</label> <input type="number" id="posZ" value="0.5" step="0.1">
    </div>

    <hr>
    
    <h3>游댃 Orientaci칩n (Mu침eca)</h3>
    
    <div class="slider-group">
      <span>Roll (Giro eje)</span> <span id="disp_roll" class="val-display">0춿</span>
      <input type="range" id="sl_roll" min="-180" max="180" value="0" oninput="updateDisplay('disp_roll', this.value)">
    </div>

    <div class="slider-group">
      <span>Pitch (Arriba/Abajo)</span> <span id="disp_pitch" class="val-display">90춿</span>
      <input type="range" id="sl_pitch" min="-180" max="180" value="90" oninput="updateDisplay('disp_pitch', this.value)">
    </div>

    <div class="slider-group">
      <span>Yaw (Izquierda/Derecha)</span> <span id="disp_yaw" class="val-display">0춿</span>
      <input type="range" id="sl_yaw" min="-180" max="180" value="0" oninput="updateDisplay('disp_yaw', this.value)">
    </div>

    <button class="btn" onclick="enviarCoordenadas()">游 EJECUTAR MOVIMIENTO</button>
  </div>
</body>
</html>
